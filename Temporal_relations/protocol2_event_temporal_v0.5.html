<!-- Bootstrap v3.0.3 -->
<link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Temporal relations</title>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <style type="text/css">
  .slider {width: 500px;}
  .slider-range {width: 500px;}
  .slider-start {width: 500px;}
  .slider-end {width: 500px;}
  div[class*='sld_pred'] {width: 500px;}
  div[class*='sld_ex'] {width: 500px;}
  

  textarea#styled {
  width: 600px;
  height: 120px;
  ;}

  input[class*="sld_ex"], textarea {
  background-color : #F0F0FF;     /*  */
  height:20px;
  font-size:12pt;}
  input[class*="sld_pred"], textarea {
  height:20px;
  font-size:12pt;}

  
  </style>

  <!-- <link rel="stylesheet" href="https://code.jquery.com/resources/demos/style.css">  -->
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>



<section class="container" id="Other" style="margin-bottom:15px; padding: 10px 10px; font-family: Arial, Helvetica, Verdana, Geneva, sans-serif; color:#333333; font-size:1.2em;"><!-- style -->
  <style type="text/css">.panel-heading {
    background-color: #FFFFFF !important;
    color:#333333 !important;
    font-size:2.0em;
    border: 0px solid #FFFFFF;
    }
    

    .panel-primary {
    border-color: #FFFFFF;
    border: 0px solid #FFFFFF;
    }
    .sentence_section {
	margin-bottom: 2em;
    }

    blockquote {
    border-left: 5px solid #666666;
    }

    .instructions_examples {
    border: 1px solid #E0E0E0;
    background-color: #F0F0FF;
    margin-left: 0em;
    padding: 0.5em;
    }

    .predicate {
    background-color: #EEDA6E;
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate1 {
    background-color: #eaf47c;  /* light yellow */
    padding-left: 3px;
    padding-right: 3px;
    }  

    .predicate2 {
    background-color: #FF7F00; /* orange */
    padding-left: 3px;
    padding-right: 3px;
    }


    .predicate3 {
    background-color: #83ddb7;  /* weird dark green */
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate4 {
    background-color: #a293b7;  /* light violet */
    padding-left: 3px;
    padding-right: 3px;
    }


    .predicate5 {
    background-color: #a4dd7c;  /* dark green */
    padding-left: 3px;
    padding-right: 3px;
    }
    

    .predicate6 {
    background-color: #eaa47c;  /* pinkish */
    padding-left: 3px;
    padding-right: 3px;
    }



    .predicate7 {
    background-color: #ab9b6e; /* light brownish */
    padding-left: 3px;
    padding-right: 3px;
    }


    .predicate8 {
    background-color: #caaa85; /* skin color */
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate9 {
    background-color: #cddd7c;  /* light green */
    padding-left: 3px;
    padding-right: 3px;
    }


    .predicate10 {
    background-color: #eac67c;  /* pale yellow */
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate11 {
    background-color: #abebf1; /* light blue */
    padding-left: 3px;
    padding-right: 3px;
    }



    .predicate12 {
    background-color: #98e585; /* bright green */
    padding-left: 3px;
    padding-right: 3px;
    }

  
    .predicate13 {
    background-color: #749bc8; /* pale blue */
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate14 {
    background-color: #f99bc8; /* bright pink */
    padding-left: 3px;
    padding-right: 3px;
    }

  
    .predicate15 {
    background-color: #FFFF00; /* yellow */
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate16 {
    background-color: #00FF00; /* green */
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate17 {
    background-color: #f981c8; /* dark pink */
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate18 {
    background-color: #fd9439; /* light orange */
    padding-left: 3px;
    padding-right: 3px;
    }

    .predicate19 {
    background-color: #d99439; /* pale orange */
    padding-left: 3px;
    padding-right: 3px;
    }
    .predicate20 {
    background-color: #8899fa; /* light violetish */
    padding-left: 3px;
    padding-right: 3px;
    }   
    .predicate21 {
    background-color: #faaca5; /* creamy */
    padding-left: 3px;
    padding-right: 3px;
    }  
    .predicate22 {
    background-color: #40cfa5; /* pale green */
    padding-left: 3px;
    padding-right: 3px;
    }     
    .predicate23 {
    background-color: #adb1a5; /* grey */
    padding-left: 3px;
    padding-right: 3px;
    }     
    .predicate24 {
    background-color: #1fe5f5; /* pale bright blue */
    padding-left: 3px;
    padding-right: 3px;
    }    
    .predicate25 {
    background-color: #b4b567; /* greenish grey */
    padding-left: 3px;
    padding-right: 3px;
    }
     .predicate26 {
    background-color: #96dacd; /* light green pale */
    padding-left: 3px;
    padding-right: 3px;
    }

    .notpredicate {
    background-color: #808080;
    color: #FFFFFF;
    padding-left: 3px;
    padding-right: 3px;
    }
    p.example_sentence {
    border: 1px solid #E0E0E0;
    background-color: #F0F0FF;
    margin-left: 0em;
    padding: 0.5em;
    }
  </style>

  <script >

    // taken from: http://www.javascriptkit.com/javatutors/dom3.shtml
function hideshow(which){

    if (!document.getElementById) {
    return;
    }
    
    if (which.style.display=="block") {
    which.style.display="none";
    }
    
    else {
    which.style.display="block";
    }
}

function hideshow_all(which){

    if (!document.getElementById) {
    return;
    }

    which.style.display="none";
  }

/**
 ** id       the unique ID for this particular select (when the same name
 **          is being used multiple times on the same page)
 **
 ** name     the select.name
 **
 ** options  a list of (option.value, label) pairs
 */


function getSelectHTML(id, name, options) {

    var select_html = '<select name="' + name + id + '" id="' + name + id + '" onchange="toggleVisibility()">';

    for (var i = 0; i < options.length; i++) {
	select_html += '<option value="' + options[i][0] + '">' + options[i][1] + '</option>';
    }

    select_html += '</select>';

    return select_html;
}


function toggleVisibility() {
     // Enable/Disable the submit button:
    
    var num_questions = jQuery.parseJSON('${var_arrays}').length;
    var var_arrays = jQuery.parseJSON('${var_arrays}');
    var submit = true;

    for (var i = 0; i < var_arrays.length; i++) 
      {
          var var_array = var_arrays[i];
          var id = var_array['id'];


          if (var_array['pred1'] != "_null_")
          {
            var pred1_array = var_array['pred1'].split(',');
          }
          else {
           var pred1_array = []
          }

          if (var_array['pred2'] != "_null_")
          {
            var pred2_array = var_array['pred1'].split(',');
          }
          else{
            var pred2_array = []
          }

          //Predicate 1:
          for (j = 0; j < pred1_array.length; j++) 
                    { 
                      var temp_pred1 = $('.' + 'sld_'+ 'pred1' + '_' + id + '_' + j.toString()).val();
                      submit = submit && temp_pred1 != "";
                    } ;
          
          //Predicate 2:
          for (k = 0; k < pred2_array.length; k++) 
                    { 
                      var temp_pred2 = $('.' + 'sld_'+ 'pred2' + '_' + id + '_' + k.toString()).val();
                      submit = submit && temp_pred2 != "";
                    } ;
          
          submit = submit &&  document.getElementById("confidence_range"+id).value != "na";

       }   

     if (submit) {
            document.getElementById("submit_button").disabled = false;
            document.getElementById("all_fillup").style.display = 'none';
                  }  
      else {
            document.getElementById("submit_button").disabled = true;
            document.getElementById("all_fillup").style.display = 'block';
            } 

  }

  
  function getValueSlider(name, id, count, range, val1, val2){
           //Function that defines slider classes for each sentence id: val1 and val2 are initial values
           //Returns the html string used to display the sliders
    
            var class_name = "sld_" + name + "_" + id + "_" + count;

            var answer = '<input name ="' + class_name + '" class="' + class_name + '" type="text" size="7" readonly="readonly"><br> <div class="' + class_name + '"> </div>';
            
            if (range=="instant")
            {
              $("." + class_name).slider({
              min: 0,
              max: 100,
              value: val1,
              slide: function( event, ui ) {
                   // find any element with class .amount WITHIN scope of $this
                  $("." + class_name).val( ui.value);
                  toggleVisibility();

                    }
               });
              
            }

            else if (range=="start"){
              $("." + class_name).slider({
              range: "max",
              min: 0,
              max: 100,
              value: val1,
              slide: function( event, ui ) {
                   // find any element with class .amount WITHIN scope of $this
                  $("." + class_name).val( ui.value);
                  toggleVisibility();
                    }
               });
            }

            else if (range=="end"){
              $("." + class_name).slider({
              range: "min",
              min: 0,
              max: 100,
              value: val1,
              slide: function( event, ui ) {
                   // find any element with class .amount WITHIN scope of $this
                  $("." + class_name).val( ui.value);
                  toggleVisibility();
                    }
               });
            }

            else{
              $("." + class_name).slider({
              range:  true,
              min: 0,
              max: 100,
              values: [val1, val2],
              slide: function( event, ui ) {
                   // find any element with class .amount WITHIN scope of $this
                  $("." + class_name).val( ui.values[ 0 ] + " - " + ui.values[ 1 ]);
                  toggleVisibility();
                    }
               });

            }

            // Updated value of the slider
         $("." + class_name).change(function () {
            var value = this.value.substring(1);
            console.log(value);
            //toggleVisibility();
            $("." + class_name).slider("value", parseInt(value));
            });

            return answer
  }

  function writeQuestions() 
  {
      var var_arrays = jQuery.parseJSON('${var_arrays}');

      var question_html = '';
      question_html += '<div class="sentence_section">';

      for (var i = 0; i < var_arrays.length; i++) 
      {
       	  var var_array = var_arrays[i];
	        var id = var_array['id'];

      	  // Select the corresponding slider based on dict values in the json(csv) file

          if (var_array['pred1'] != "_null_")
          {
            var pred1_array = var_array['pred1'].split(',');
          }
          else {
           var pred1_array = []
          }

          if (var_array['pred2'] != "_null_")
          {
            var pred2_array = var_array['pred2'].split(',');
          }
          else{
            var pred2_array = []
          }

          //Predicate 1:
          var select_value_pred1 = [];
        
          for (j = 0; j < pred1_array.length; j++) 
                    { 
                      select_value_pred1[j] = getValueSlider('pred1', id, j.toString(), 'both', 35, 65);
                    } ;
            
          //Predicate 2:
          var select_value_pred2 = [];

          for (k = 0; k < pred2_array.length; k++) 
                    { 
                      select_value_pred2[k] = getValueSlider('pred2', id, k.toString(), 'both', 35, 65);
                    } ;
        
          //Confidence Options
      	  var select_confidence = getSelectHTML(id,"confidence_range",

      				      [  ['4', 'totally confident'],
      					        ['3', 'very confident'],
                        ['2', 'somewhat confident'],
      					        ['1', 'not very confident'],
                        ['0', 'not at all confident']]);

	         // question html

          question_html += '<h3>' + var_array['sentence'] + '</h3> ';


          

          // Predicate 1 Sliders
           
            var l=0;
            for (l = 0; l < pred1_array.length; l++) 
            {    
            question_html += '<p><br><span class="predicate' + (l+1).toString()  + '">' + '<sup>'+ (l+1).toString() +'</sup>' + pred1_array[l] + '</span><br><b>Range: </b>' + select_value_pred1[l] + '</p>' ;
            };
          
           

           // Predicate 2 Sliders

            for (m = 0; m < pred2_array.length; m++) 
            { 
                question_html += '<p><br><span class="predicate' + (l+m+1).toString()  + '">' + '<sup>'+ (l+m+1).toString() +'</sup>'+ pred2_array[m] + '</span><br><b>Range: </b>' + select_value_pred2[m] + '</p>' ;
            };

      
           // Confidence Question
          
           question_html += '<br/><p id="ques_conf'+id+'">You are '  +select_confidence + ' about the ranges that you have selected.</p>' ;

	       question_html += '<hr>';

      };

      question_html += 'Comments: (Optional) <br/><textarea id="styled" name="comments" cols="60" rows="30"></textarea></div>';
      //var var_temp = $(question_html);
      document.getElementById("questions").innerHTML = question_html;
      //console.log(var_temp);

    }


// read when document is ready (like a "main" function)
$(document).ready(function() 
{
    //Load sliders for instructions
    getValueSlider('ex', '1', '1','both', 35, 65);
    getValueSlider('ex', '2', '1','both', 10, 17);
    getValueSlider('ex', '3', '1','both', 30, 80);
    getValueSlider('ex', '4', '1','both', 10, 50);
    getValueSlider('ex', '5', '1','both', 55, 62);
    getValueSlider('ex', '6', '1','both', 30, 80);
    getValueSlider('ex', '7', '1','both', 50, 60);
    getValueSlider('ex', '8', '1','both', 30, 40);
    getValueSlider('ex', '9', '1','both', 50, 55);
  
    console.log("**** run ready function");

    //Write Questions
    writeQuestions();

    // Load sliders for Questions
    var var_arrays = jQuery.parseJSON('${var_arrays}');
    for (var i = 0; i < var_arrays.length; i++) 
      {
          var var_array = var_arrays[i];
          var id = var_array['id'];

          if (var_array['pred1'] != "_null_")
          {
            var pred1_array = var_array['pred1'].split(',');
          }
          else {
           var pred1_array = []
          }

          if (var_array['pred2'] != "_null_")
          {
            var pred2_array = var_array['pred2'].split(',');
          }
          else{
            var pred2_array = []
          }
      
          //Predicate 1:
          
          for (j= 0; j < pred1_array.length; j++) 
                    { 
                      //console.log(pred1_array[j]);
                      getValueSlider('pred1', id, j.toString(), 'both', 35, 65);
                    } ;


          //Predicate 2:
          for (k = 0; k < pred2_array.length; k++) 
                    { 
                      getValueSlider('pred2', id, k.toString(), 'both', 35, 65);
                    } ;
          
        }
    });


</script>

    <div class="row col-xs-12 col-md-12"><!-- Instructions -->
    <div class="panel panel-primary"><!--
    <div class="panel-heading"><strong>Task Name</strong></div>
    --><!-- <div class="panel-body"> -->

    <div class="instructions_intro">

    <h1>What is the relation between the two events described?</h1>

    <p> <span class="predicate15"> You may do up to 25 HITs in this batch, unless you have requested and received explicit permission by email to do more. If you do more than 25 HITs without such permission, we reserve the right to reject any work done in excess of 25 HITs from this batch.</span></p>

    <h2>Overview</h2>


    <p class="instructions_intro">

      
      In this task, you will be presented with a sentence containing some <span class="predicate">color-highlighted</span> words, followed by questions about these words. We call these words predicates. Predicates refer to some kind of situationâ€”for example, a dynamic event (like running or kicking) or a state of being (like happiness or redness).
    </p>

    <p class="instructions_intro">
      We are interested in knowing the chronology of the situations described by these predicates: did one happen before/after the other?; did they overlap in time?; etc. 

      </p>

      <p class="instructions_intro">Some of the highlighted predicates may refer to situations that didn't happen or haven't happened yet. In these cases, make your best guess about what their chronology would be if they had happened or do happen in the future.</p>

    <a href="javascript:hideshow_all(document.getElementById('instant_instr'))">Click here to hide all examples</a>
      
    <h2>How the task works</h2>
    <div id="task_details" >
    <p class="instructions_intro">
      The task starts with a sentence with some highlighted words within the sentence. For each highlighted predicate, you'll see a slider bar with two sliders on it. The left slider represents the <b>start-point</b> of the situation described the predicate. The right slider represents the <b>end-point</b> of the situation described by the predicate. 
      <br>The slider bar is shown below. Click and drag the slider horizontally to change the range. </br>
      <div id="generic" style="display: block" class="instructions_examples">
        <b>Range:</b>
        <input class="sld_ex_1_1" type="text" size="7" readonly="readonly"><br> <div class="sld_ex_1_1"> </div> 

      </div>
    </p>
  
    </div>

    <p> You'll be presented with a slider bar for each highlighted predicate in the sentence.  <b>Your task is to move the sliders so that the chronology of the events is correct as per the slider positions</b>. Let's look at some examples</p>
    
    <!-- begin instantaneous examples -->
    
    <a href="javascript:hideshow(document.getElementById('instant_instr'))">Examples </a>
    </br>
    <div id="instant_instr" style="display: block" class="instructions_examples">
<p>Consider the below example.</p>

      
      <blockquote>Sam <span class="predicate1"><sup>1</sup>broke</span> the window and <span class="predicate2"><sup>2</sup>ran</span> away.</blockquote>

      <p>
        <span class="predicate1"><sup>1</sup>broke</span> <br>
        <b>Range:</b>
        <input class="sld_ex_2_1" type="text" size="7" readonly="readonly"> <div class="sld_ex_2_1"> </div>
      </p>


      <p>
        <br>
        <span class="predicate2"><sup>2</sup>ran</span> <br>
        <b>Range:</b>
        <input class="sld_ex_3_1" type="text" size="7" readonly="readonly"> <div class="sld_ex_3_1"> </div>
      </p>
       
<p>The situation described by the predicate <span class="predicate2"><sup>2</sup>ran</span> happened after the situation described by the predicate <span class="predicate1"><sup>1</sup>broke</span>. Hence the start-point of <span class="predicate2"><sup>2</sup>ran</span> is after the end-point of <span class="predicate1"><sup>1</sup>broke</span>. Also note that the area highlighting <span class="predicate1"><sup>1</sup>broke</span> is much smaller than the area highlighting <span class="predicate2"><sup>2</sup>ran</span> because the situation described by <span class="predicate1"><sup>1</sup>broke</span> probably took less time to happen than the situation described by <span class="predicate2"><sup>2</sup>ran</span>. </p>   

<p>Try as much as possible to get the relative duration of events correct. We know it won't always be possible to get it absolutely correct and hence we have given confidence labels to know how certain you are in your answer. </p>

<p>Let's take another example where the first situation has a larger area highlighted.</p>

      <blockquote>The musician <span class="predicate1"><sup>1</sup>played</span> guitar for two hours and then <span class="predicate2"><sup>2</sup>left</span> the music room.</blockquote>

      <p><span class="predicate1"><sup>1</sup>played</span> <br>
        <b>Range:</b>
        <input class="sld_ex_4_1" type="text" size="7" readonly="readonly"> <div class="sld_ex_4_1"> </div>
      </p>


    <p><br><span class="predicate2"><sup>2</sup>left</span> <br>
      <b>Range:</b>
        <input class="sld_ex_5_1" type="text" size="7" readonly="readonly"> <div class="sld_ex_5_1"> </div>
    </p>

    <p>The situation described by <span class="predicate1"><sup>1</sup>played</span> took two hours to happen which is much longer than the duration of the situation described by <span class="predicate2"><sup>2</sup>left</span> which probably just took seconds. Again, note that the start-point of the situation described by <span class="predicate2"><sup>2</sup>left</span> is after the end-point of the situation described by <span class="predicate1"><sup>1</sup>played</span>.  </p>

    <p> Our main interest is in knowing that the the start-point of <span class="predicate2"><sup>2</sup>left</span> is greater than or equal to the end-point of <span class="predicate1"><sup>1</sup>played</span>, but you should try to get the relative sizes of events correct as well. Don't worry too much about the exact numerical values; they are just meant to give you help calibrate the relative size of each situation.</p>  

  <p> In some situations, one event is contained in the other event. Consider the example below.</p>

    <blockquote>We <span class="predicate1"><sup>1</sup>drove</span> the car from New York City to Boston and realized only later that we had <span class="predicate2"><sup>2</sup>escaped</span> a major highway crash on our route.</blockquote>

    <p><span class="predicate1"><sup>1</sup>drove</span> <br>
      <b>Range:</b>
        <input class="sld_ex_6_1" type="text" size="7" readonly="readonly"> <div class="sld_ex_6_1"> </div>
    </p>

    <p><br><span class="predicate2"><sup>2</sup>escaped</span> <br>
      <b>Range:</b>
        <input class="sld_ex_7_1" type="text" size="7" readonly="readonly"> <div class="sld_ex_7_1"> </div>
    </p>

<p>In the above example, the situation described by the predicate <span class="predicate2"><sup>2</sup>escaped</span> took place somewhere between the situation described by the predicate <span class="predicate1"><sup>1</sup>drove</span>.</p>


<p> Some of the highlighted predicates may refer to situations that didn't happen or haven't happened yet. In these cases, make your best guess about what their chronology would be if they had happened or do happen in the future. Look at the following sentence.</p>

<blockquote>Even if John had <span class="predicate1"><sup>1</sup>gone</span> to the store, he would still have forgotten to <span class="predicate2"><sup>2</sup>buy</span> milk.</blockquote>

<p><span class="predicate1"><sup>1</sup>gone</span> <br>
      <b>Range:</b>
        <input class="sld_ex_8_1" type="text" size="7" readonly="readonly"> <div class="sld_ex_8_1"> </div>
    </p>

    <p><br><span class="predicate2"><sup>2</sup>buy</span> <br>
      <b>Range:</b>
        <input class="sld_ex_9_1" type="text" size="7" readonly="readonly"> <div class="sld_ex_9_1"> </div>
    </p>

<p> In the above example, even though none of the situations described by the predicates have happened, it can be said that the situation described by <span class="predicate1"><sup>1</sup>gone</span> would have happened before the situation described by <span class="predicate2"><sup>2</sup>buy</span>.</p>

</div>
<br>

    <!-- end of NO instantaneous examples -->

</div>


</div> <!-- Panel-body --> </div>  
<!-- Panel-primary --><!-- End Instructions --><!-- Content Body -->

<section>
  <input name="dummy" type="hidden" />
  <div id="hit">
    <h2>Sentences</h2>

    <fieldset>
      <div id="questions"></div>
    </fieldset>

    <div>
      <p id="all_fillup"> Please answer all the questions to enable the submit button.<p>
      <input class="btn btn-primary btn-lg" id="submit_button" type="submit" value="Submit" disabled=true /></div>
  </div>
  <!-- hit--></section>
<!-- End Content Body --></div>
</section>

<!-- close container -->
<style type="text/css">fieldset { padding: 10px; background:#fbfbfb; border-radius:5px; margin-bottom:5px; }
</style>



