<!-- Bootstrap v3.0.3 -->
<link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Temporal relations</title>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <style type="text/css">
  .slider {width: 500px;}
  .slider-range {width: 500px;}
  .slider-start {width: 500px;}
  .slider-end {width: 500px;}
  </style>


  <!-- <link rel="stylesheet" href="https://code.jquery.com/resources/demos/style.css">  -->
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>



<section class="container" id="Other" style="margin-bottom:15px; padding: 10px 10px; font-family: Arial, Helvetica, Verdana, Geneva, sans-serif; color:#333333; font-size:1.2em;"><!-- style -->
  <style type="text/css">.panel-heading {
    background-color: #FFFFFF !important;
    color:#333333 !important;
    font-size:2.0em;
    border: 0px solid #FFFFFF;
    }

    .panel-primary {
    border-color: #FFFFFF;
    border: 0px solid #FFFFFF;
    }
    .sentence_section {
	margin-bottom: 2em;
    }

    blockquote {
    border-left: 5px solid #666666;
    }

    .instructions_examples {
    border: 1px solid #E0E0E0;
    background-color: #F0F0FF;
    margin-left: 0em;
    padding: 0.5em;
    }

    .predicate {
    background-color: #EEDA6E;
    padding-left: 3px;
    padding-right: 3px;
    }
    .notpredicate {
    background-color: #808080;
    color: #FFFFFF;
    padding-left: 3px;
    padding-right: 3px;
    }
    p.example_sentence {
    border: 1px solid #E0E0E0;
    background-color: #F0F0FF;
    margin-left: 0em;
    padding: 0.5em;
    }
  </style>

  <script >

    // taken from: http://www.javascriptkit.com/javatutors/dom3.shtml
function hideshow(which){

    if (!document.getElementById) {
    return;
    }
    
    if (which.style.display=="block") {
    which.style.display="none";
    }
    
    else {
    which.style.display="block";
    }
}

/**
 ** id       the unique ID for this particular select (when the same name
 **          is being used multiple times on the same page)
 **
 ** name     the select.name
 **
 ** options  a list of (option.value, label) pairs
 */


function getSelectHTML(id, name, options) {

    var select_html = '<select name="' + name + id + '" id="' + name + id + '" onchange="toggleVisibility('+id+')">';

    for (var i = 0; i < options.length; i++) {
	select_html += '<option value="' + options[i][0] + '">' + options[i][1] + '</option>';
    }

    select_html += '</select>';

    return select_html;
}

/*
function toggleVisibility(id) {

     var questionElement = document.getElementById('question-happened'+id);

     var questionElement2 = document.getElementById('question-happened2'+id);

     var condition = document.getElementById("instantaneous"+id).value == "false";
     //condition = condition && document.getElementById("predicate"+id).value == "true";

     if (condition) {
             questionElement.style.display = 'block' ;
             questionElement2.style.display = 'block';
             //questionElement.slideDown();
     }
     else {
             questionElement.style.display = 'none' ;
             questionElement2.style.display = 'none';
             //questionElement.slideUp();
     }
  }

  */

  // Function inspired from this script: http://jsfiddle.net/XZCxt/361/
function loadSliders()
  {
   //Single slider ::: no highlight 
     $(".slider").each(function() 
    {
        // $this is a reference to .slider in current iteration of each
        $this = $(this);
        // find any .slider-range element WITHIN scope of $this
        var value_init = parseFloat($(this).find('.currentValue').text()); 
        // source: https://forum.jquery.com/topic/dynamic-initial-value-of-a-slider
        console.log("slider initiated ")
        $(".slider-sub", $this).slider(
        {

            min: 0,
            max: 100,
            value: value_init,
            slide: function( event, ui ) 
            {
               // find any element with class .amount WITHIN scope of $this
               $(this).parent().find(".amount").html(ui.value);
               console.log("sub-slider main")
            }
        });

       
        //$(".amount").html( $(".slider-sub").slider("value") );
     });
    //Dual sliders
    $(".slider-range").each(function() {
        // $this is a reference to .slider in current iteration of each
        $this = $(this);
        // find any .slider-range element WITHIN scope of $this

        var value_start = parseFloat($(this).find('.ValueStart').text());
        var value_end = parseFloat($(this).find('.ValueEnd').text());
        console.log("slider range initiated ")
        // source: https://forum.jquery.com/topic/dynamic-initial-value-of-a-slider

        $(".slider-sub", $this).slider({
            range:   true,
            min: 0,
            max: 100,
            values: [value_start, value_end],
            slide: function( event, ui ) {
               // find any element with class .amount WITHIN scope of $this
               $(this).parent().find(".amount").html(ui.values[ 0 ] + " - " + ui.values[ 1 ]);
               console.log("sub-slider range")
            }
        });
        //$(".amount").html( $(".slider-sub").slider("values", 0 ) + " - " + $(".slider-sub").slider("values", 1 ));
     });
     
     
     //Single slider ::: highlight to the right
     
     $(".slider-start").each(function() 
    {
        // $this is a reference to .slider in current iteration of each
        $this = $(this);
        // find any .slider-range element WITHIN scope of $this
        
        var value_init = parseFloat($(this).find('.currentValue').text()); 
        console.log("slider start initiated ")
        // source: https://forum.jquery.com/topic/dynamic-initial-value-of-a-slider

        $(".slider-sub", $this).slider(
        {
            range:  "max",
            min: 0,
            max: 100,
            value: value_init,
            slide: function( event, ui ) 
            {
               // find any element with class .amount WITHIN scope of $this
               $(this).parent().find(".amount").html(ui.value);
               console.log("sub-slider start")
            }
        });

       
        //$(".amount").html( $(".slider-sub").slider("value") );
     });
     
     
     //Single slider ::: highlight to the left
     
     $(".slider-end").each(function() 
    {
        // $this is a reference to .slider in current iteration of each
        $this = $(this);
        // find any .slider-range element WITHIN scope of $this
        var value_init = parseFloat($(this).find('.currentValue').text()); 
        console.log("slider end initiated ")
        // source: https://forum.jquery.com/topic/dynamic-initial-value-of-a-slider


        $(".slider-sub", $this).slider(
        {
            range:  "min",
            min: 0,
            max: 100,
            value: value_init,
            slide: function( event, ui ) 
            {
               // find any element with class .amount WITHIN scope of $this
               $(this).parent().find(".amount").html(ui.value);
               console.log("sub-slider end")
            }
        });

       
       // $(".amount").html( $(".slider-sub").slider("value") );
     });
     
     
  }

  function writeQuestions() 
  {
      var var_arrays = jQuery.parseJSON('${var_arrays}');

      var question_html = '';
      question_html += '<div class="sentence_section">';

      for (var i = 0; i < var_arrays.length; i++) 
      {
       	  var var_array = var_arrays[i];
	        var id = var_array['id'];

      	  // question answers


          //var select_slider1 = $(this).parent().find(".amount").html(ui.value);

      	  var select_confidence = getSelectHTML(id,"confidence",
      				      [['na', '  -------  '],
      					        ['4', 'totally confident'],
      					        ['3', 'very confident'],
                        ['2', 'somewhat confident'],
      					        ['1', 'not very confident'],
                        ['0', 'not at all confident']]);

	  // question html

          question_html += '<h3>' + var_array['sentence'] + '</h3>';

          // Predicate 1 Sliders
          if (var_array['instant_pred1'] == "True") 
          {
           question_html += '<p><span class="predicate">' + var_array['pred1'] + '</span><div class="slider"><b>Range:</b><span class="amount"></span><div class="hiddenValues" style="display: none;"> <div class="currentValue"> 50 </div> </div> <!-- end hiddenValues --> <div class="slider-sub"></div> </div></p>' ;
           console.log("**** pred1_ins");
          }

          else if( (var_array['start_pred1'] == "True") & (var_array['end_pred1'] == "False"))
          {

          question_html += '<p> <span class="predicate">' + var_array['pred1'] +'</span><div class="slider-start"> <b>Range:</b><span class="amount"></span><div class="hiddenValues" style="display: none;"> <div class="currentValue"> 50 </div> </div> <!-- end hiddenValues --> <div class="slider-sub"></div> </div></p>';
          console.log("**** pred1_start");
          }

          else if ( (var_array['start_pred1'] == "False") & (var_array['end_pred1'] == "True") )
          {
            question_html += '<p> <span class="predicate">' + var_array['pred1'] +'</span><div class="slider-end"><b>Range:</b><span class="amount"></span> <div class="hiddenValues" style="display: none;"><div class="currentValue"> 50 </div> </div> <!-- end hiddenValues --> <div class="slider-sub"></div> </div> </p>';
            console.log("**** pred1_end");
           }

           else 
           {
              question_html += '<p> <span class="predicate">' + var_array['pred1'] +'</span> <div class="slider-range"><b>Range:</b><span class="amount"></span><div class="hiddenValues" style="display: none;"> <div class="ValueStart"> 40 </div><div class="ValueEnd"> 60 </div></div> <!-- end hiddenValues --> <div class="slider-sub"></div> </div> </p>';
              console.log("**** pred1_else");

           }


            // Predicate 2 Sliders
           if (var_array['instant_pred2'] == "True") 
          {
           question_html += '<p><span class="predicate">' + var_array['pred2'] + '</span> <div class="slider"> <b>Range:</b> <span class="amount"></span><div class="hiddenValues" style="display: none;"><div class="currentValue"> 50 </div> </div> <!-- end hiddenValues --> <div class="slider-sub"></div> </div></p>' ;
           console.log("**** pred2_ins");
          }

          else if( (var_array['start_pred2'] == "True") & (var_array['end_pred2'] == "False"))
          {

          question_html += '<p> <span class="predicate">' + var_array['pred2'] +'</span><div class="slider-start"> <b>Range:</b> <span class="amount"></span> <div class="hiddenValues" style="display: none;"> <div class="currentValue"> 50 </div></div> <!-- end hiddenValues --> <div class="slider-sub"></div> </div></p>';
          console.log("**** pred2_start");
          }

          else if ( (var_array['start_pred2'] == "False") & (var_array['end_pred2'] == "True") )
          {
            question_html += '<p> <span class="predicate">' + var_array['pred2'] +'</span> <div class="slider-end"><b>Range:</b><span class="amount"></span><div class="hiddenValues" style="display: none;"><div class="currentValue"> 50 </div> </div> <!-- end hiddenValues --> <div class="slider-sub"></div> </div></p>';
            console.log("**** pred2_end");
           }

           else 
           {
              question_html += '<p> <span class="predicate">' + var_array['pred2'] +'</span> <div class="slider-range"><b>Range:</b> <span class="amount"></span> <div class="hiddenValues" style="display: none;"> <div class="ValueStart"> 40 </div><div class="ValueEnd"> 60 </div></div> <!-- end hiddenValues --><div class="slider-sub"></div></div></p>';
              console.log("**** pred2_else");
           }

        question_html += '<br/><p>You are '  +select_confidence + ' about the ranges that you have selected.</p>' 

	       question_html += '<hr>';

      }

      question_html += 'Comments:<br/><textarea name="comments" cols="60" rows="5"></textarea></div>';
      //var var_temp = $(question_html);
      document.getElementById("questions").innerHTML = question_html;
      //console.log(var_temp);

    }


function hideQuestions() {

   var var_arrays = jQuery.parseJSON('${var_arrays}');

   for (var i = 0; i < var_arrays.length; i++) {
      var var_array = var_arrays[i];
      var id = var_array['id'];

      var question_happened = document.getElementById('question-happened'+id);
      question_happened.style.display = 'none';

      var question_happened2 = document.getElementById('question-happened2'+id);
      question_happened2.style.display = 'none';
   }

}



// read when document is ready (like a "main" function)
$(document).ready(function() {
    loadSliders();
    console.log("**** run ready function");
    writeQuestions();
    //hideQuestions();
    
});


</script>

    <div class="row col-xs-12 col-md-12"><!-- Instructions -->
    <div class="panel panel-primary"><!--
    <div class="panel-heading"><strong>Task Name</strong></div>
    --><!-- <div class="panel-body"> -->

    <div class="instructions_intro">

    <h1>What is the relation between the two events described?</h1>

    <h2>Overview</h2>


    <p class="instructions_intro">

      
      In this task, you will be presented with a sentence containing two <span class="predicate">yellow-highlighted</span> words, followed by questions about these words. We call these words predicates. Predicates refer to some kind of situation—for example, a dynamic event (like running or kicking) or a state of being (like happiness or redness).
    </p>

    <p class="instructions_intro">
      We are interested in knowing the chronology of the situations described by these predicates: did one happen before/after the other?; did they overlap in time?; etc. 

      </p>
      
    <h2>How the task works</h2>

    <p class="instructions_intro">
      The task starts with a sentence with some highlighted words within the sentence. For each highlighted predicate, you'll see a slider bar. If the situation described by the predicate is instantaneous, then the slider bar will have a single slider which can be moved along the horizontal line.
      <br>A single slider for an <b>instantaneous event</b> is shown below. Click and drag the slider horizontly to change the range. </br>
      <div id="generic" style="display: block" class="instructions_examples">
        
       <div class="slider">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="currentValue"> 50 </div> 
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>

      </div>
    </p>

    <p> 
      Some events have a definite start-point, but no definite end-point, within the time described by the sentence. The predicates describing these types of situations will also have a single slider but the area after the slider would be highlighted to show that the event started at the position of the slider and the event continued after that.
    </p>

    <p>Single slider for an event with a <b>definite start-point</b> looks like this:</p>
    <div id="generic" style="display: block" class="instructions_examples">
      <div class="slider-start">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="currentValue"> 50 </div> 
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>

    </div>

    <p> 
      Some events have a definite end-point, but no definite start-point, within the time described by the sentence. The predicates describing these types of situations will also have a single slider but the area before the slider would be highlighted to show that the event ended at the position of the slider and the event happened before that point.
    </p>

    <p>Single slider for an event with a <b>definite end-point</b> looks like this:</p>
    <div id="generic" style="display: block" class="instructions_examples">
      <div class="slider-end">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="currentValue"> 50 </div> 
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
    </div>

    <p> 
      Some events have both a definite start-point and a definite end-point. The predicates describing these types of situations will have a dual slider and the area between the sliders would be highlighted to reflect that the event happened between those two points.
    </p>

    <p>Dual slider for an event with a <b>both definite start/end-points</b> looks like this:</p>
    <div id="generic" style="display: block" class="instructions_examples">
      <div class="slider-range">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="ValueStart"> 30 </div> 
                <div class="ValueEnd"> 70 </div> 
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
    </div>

    <p> You'll be presented with a slider bar for each highlighted predicate in the sentence.  <b>Your task is to move the sliders so that the chronology of the events is correct as per the slider positions</b>. </p>
    
    
    <!-- begin instantaneous examples -->
    
    <a href="javascript:hideshow(document.getElementById('generic'))">Examples with one instantaneous event</a>
    </br>
    <div id="generic" style="display: block" class="instructions_examples">
<p>Let's consider an example where one event is instantaneous and the other one has a definite start-point but no definite end-point.</p>

      
      <blockquote>Sam <span class="predicate">broke</span> the window and <span class="predicate">ran</span> away.</blockquote>

      <p>
        <span class="predicate">broke</span> 
        <div class="slider">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="currentValue"> 40 </div> 
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
      </p>


      <p>
        <span class="predicate">ran</span> 
        <div class="slider-start">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="currentValue"> 50 </div> 
                </div> <!-- end hiddenValues --> 
          <div class="slider-sub"></div> 
       </div>
      </p>
       
<p>The predicate <span class="predicate">broke</span> has a single slider with no highlighting around it because it describes an <i>instantaneous</i> situation. The predicate <span class="predicate">ran</span> describes a situation having a definite start-point within the time period discussed in the sentence - probably, right after he broke the window. Hence, it has a single slider with the area to its right highlighted reflecting that the situation continues after that point. </p>

<p> Note that the range values of these sliders are flexible. In the above example, all we want to know is that the slider range value (or slider position) of <span class="predicate">ran</span> is greater than the range value of <span class="predicate">broke</span>. Don't worry too much about the exact values of range. They are just meant to get a sense of the chronology of events. </p>

<p>Let's take another example.</p>

      <blockquote>The musician <span class="predicate">played</span> guitar for two hours and then <span class="predicate">left</span> the music room.</blockquote>

      <p><span class="predicate">played</span> 
      <div class="slider-range">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="ValueStart"> 10 </div> 
                <div class="ValueEnd"> 50 </div>  
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
      </p>


    <p><span class="predicate">left</span> 
      <div class="slider">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="currentValue"> 60 </div> 
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
    </p>

    <p>The predicate <span class="predicate">played</span> has a dual slider with the area between the sliders highlighted to reflect a definite start-point and a definite end-point. The predicate <span class="predicate">left</span> has a single slider with no highlighting as it describes an <i>instantaneous</i> situation. Again, note that the slider position (or range value) of the situation described by <span class="predicate">left</span> is after the end-point of the situation described by <span class="predicate">played</span>. 

  <p> Next, let's look at a situation where an instantaneous event is contained within another event.</p>

    <blockquote>We <span class="predicate">drove</span> the car from New York City to Boston and realized only later that we had <span class="predicate">escaped</span> a major highway crash on our route.</blockquote>

    <p><span class="predicate">drove</span> 
      <div class="slider-range">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="ValueStart"> 30 </div> 
                <div class="ValueEnd"> 80 </div>
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
    </p>

    <p><span class="predicate">escaped</span> 
      <div class="slider">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="currentValue"> 50 </div> 
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
    </p>




</div>
<!-- end instantaneous examples -->

<br>

<p> Finally, let's look at sentences where none of the events are instantaneous </p>

<!-- begin withh NO instantaneous examples -->
    
    <a href="javascript:hideshow(document.getElementById('generic'))">Examples with no instantaneous events</a>
    </br>
    <div id="generic" style="display: block" class="instructions_examples">

<p>In some situations, one event is contained in the other event. We want to capture the chronology of these events using the sliders. Consider the example below:</p>

  <blockquote>We went to the stadium and <span class="predicate">played</span> football all night yesterday only <span class="predicate">resting</span> for a few minutes between the matches.</blockquote>


  <p><span class="predicate">played</span> 
      <div class="slider-range">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="ValueStart"> 20 </div> 
                <div class="ValueEnd"> 80 </div>
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
    </p>

    <p><span class="predicate">resting</span> 
      <div class="slider-range">
            <b>Range:</b>
            <span class="amount"></span>
                <div class="hiddenValues" style="display: none;"> 
                <div class="ValueStart"> 40 </div> 
                <div class="ValueEnd"> 60 </div> 
                </div> <!-- end hiddenValues --> 
            <div class="slider-sub"></div> 
       </div>
    </p>


<p>In the above example, the situation described by the predicate <span class="predicate">resting</span> took place somewhere between the situation described by the predicate <span class="predicate">played</span>.</p>

</div>



    <!-- end of NO instantaneous examples -->


   
    </div>


</div> <!-- Panel-body --> </div>
<!-- Panel-primary --><!-- End Instructions --><!-- Content Body -->

<section>
  <input name="dummy" type="hidden" />
  <div id="hit">
    <h2>Sentences</h2>

    <fieldset>
      <div id="questions"></div>
    </fieldset>

    <div><input class="btn btn-primary btn-lg" id="submit_button" type="submit" value="Submit" /></div>
  </div>
  <!-- hit--></section>
<!-- End Content Body --></div>
</section>

<!-- close container -->
<style type="text/css">fieldset { padding: 10px; background:#fbfbfb; border-radius:5px; margin-bottom:5px; }
</style>



