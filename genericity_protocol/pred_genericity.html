<!-- Bootstrap v3.0.3 -->
<link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<section class="container" id="Other" style="margin-bottom:15px; padding: 10px 10px; font-family: Arial, Helvetica, Verdana, Geneva, sans-serif; color:#333333; font-size:1.2em;"><!-- style -->
  <style type="text/css">.panel-heading {
    background-color: #FFFFFF !important;
    color:#333333 !important;
    font-size:2.0em;
    border: 0px solid #FFFFFF;
    }

    .panel-primary {
    border-color: #FFFFFF;
    border: 0px solid #FFFFFF;
    }
    .sentence_section {
    margin-bottom: 2em;
    }

    blockquote {
    border-left: 5px solid #666666;
    }

    .instructions_examples {
    border: 1px solid #E0E0E0;
    background-color: #F0F0FF;
    margin-left: 0em;
    padding: 0.5em;
    }

    .predicate {
    background-color: #EBC944;
    padding-left: 3px;
    padding-right: 3px;
    }

    p.example_sentence {
    border: 1px solid #E0E0E0;
    background-color: #F0F0FF;
    margin-left: 0em;
    padding: 0.5em;
    }
  </style>

  <script type="text/javascript">


    // taken from: http://www.javascriptkit.com/javatutors/dom3.shtml
function hideshow(which){

    if (!document.getElementById) {
    return;
    }

    if (which.style.display=="block") {
    which.style.display="none";
    }

    else {
    which.style.display="block";
    }
}

/**
 ** id       the unique ID for this particular select (when the same name
 **          is being used multiple times on the same page)
 **
 ** name     the select.name
 **
 ** options  a list of (option.value, label) pairs
 */
function getSelectHTML(id, name, options) {
    var select_html = '<select name="' + name + id + '" id="' + name + id + '" onchange="toggleVisibility(' + id + ')">';

    for (var i = 0; i < options.length; i++) {
    select_html += '<option value="' + options[i][0] + '">' + options[i][1] + '</option>';
    }

    select_html += '</select>';

    return select_html;
}


function toggleVisibility(id) {
    // toggle the visibility of the second and third question

    var question_eventivity = document.getElementById('question-pred-eventivity' + id);
    var question_predictability = document.getElementById('question-pred-predictability' + id);
    var cond = document.getElementById('pred_dynamicity' + id).value == "true";

    if (cond) {
        console.log("hello");
        question_eventivity.style.display = 'block';
        question_predictability.style.display = 'block';
    }

    else {
        console.log("yo");
        question_eventivity.style.display = 'none';
        question_predictability.style.display = 'none';
    }

    // Toggle the submit button availability
    var num_questions = jQuery.parseJSON('${var_arrays}').length;
    var submit = true;

    for (var i = 1; i < 11; i++) {
        id = String(i);
        // console.log(i)
        var cond_dyn =  document.getElementById("pred_dynamicity" + id).value == "false"
        if (cond_dyn) {
            submit = submit && 
            document.getElementById("pred_dynamicity" + id).value != "na" && 
            document.getElementById("dynamicity_certainty" + id).value != "na"
        }
        else {
        submit = submit && 
        document.getElementById("pred_dynamicity" + id).value != "na" && 
        document.getElementById("pred_eventivity" + id).value != "na" && 
        document.getElementById("pred_predictability" + id).value != "na" && 
        document.getElementById("dynamicity_certainty" + id).value != "na" && 
        document.getElementById("eventivity_certainty" + id).value != "na" && 
        document.getElementById("predictability_certainty" + id).value != "na";
        }
     }


    if (submit) {
        document.getElementById("submit_button").disabled=false;
    }  
    else {
        document.getElementById("submit_button").disabled=true;
    } 
}


  /** Add HTML for questions to DOM element with ID 'questions'
   **
   ** Assumes var_arrays is a list of tuples:
   ** id : a numeric id that is used in the generation of the headers when the HIT data comes back
   ** sentence_id : e.g., "en-ud-train.conllu 12"
   ** pred_token : e.g., "6"
   ** predicate_lemma : e.g., "anpredicatece"
   ** sentence
   **
  */

      // Mechanical Turk will fill in '$ { varname }' variables when
      // HTML template is rendered

function writeQuestions() {
    var var_arrays = jQuery.parseJSON('${var_arrays}');

    var question_html = '';
    question_html += '<div class="sentence_section">';

    for (var i = 0; i < var_arrays.length; i++) {
        var var_array = var_arrays[i];
        var id = var_array['id'];

        // question answers

        var select_dynamicity = getSelectHTML(id,"pred_dynamicity",
                                            [['na', '  -------  '],
                                            ['true','is'],
                                            ['false','is not']]);

        var select_eventivity = getSelectHTML(id,"pred_eventivity",
                                            [['na', '  -------  '],
                                            ['true','does'],
                                            ['false','does not']]);

        var select_predictability = getSelectHTML(id,"pred_predictability",
                                                [['na', '  -------  '],
                                                ['true','does'],
                                                ['false','does not']]);

        var select_dynamicity_certainty = getSelectHTML(
                            id,"dynamicity_certainty",
                            [['na', '  -------  '],
                            ['4', 'totally confident'],
                            ['3', 'very confident'],
                            ['2', 'somewhat confident'],
                            ['1', 'not very confident'],
                            ['0', 'not at all confident']]);

        var select_eventivity_certainty = getSelectHTML(
                            id,"eventivity_certainty",
                            [['na', '  -------  '],
                            ['4', 'totally confident'],
                            ['3', 'very confident'],
                            ['2', 'somewhat confident'],
                            ['1', 'not very confident'],
                            ['0', 'not at all confident']]);

        var select_predictability_certainty = getSelectHTML(
                            id,"predictability_certainty",
                            [['na', '  -------  '],
                            ['4', 'totally confident'],
                            ['3', 'very confident'],
                            ['2', 'somewhat confident'],
                            ['1', 'not very confident'],
                            ['0', 'not at all confident']]);

      // question html

        question_html += '<h3>' + var_array['pred_sentence'] + '</h3>';

        question_html += '<br/><p>The situation referred to by <span class="predicate">' + var_array['pred'] + '</span> ' + select_dynamicity + ' dynamic and I am ' + select_dynamicity_certainty + ' about my choice.</p>';

        question_html += '<br/><p id="question-pred-eventivity' + id + '">The situation referred to by <span class="predicate"> ' + var_array['pred'] + '</span> ' + select_eventivity + ' refer to a particular situation or particular situations and I am ' + select_eventivity_certainty + ' about my choice.</p>';

        // question_html += '<br/><p id="question-pred-predictability' + id + '">The situation referred to by <span class="predicate">' + var_array['pred'] + '</span>' + select_predictability + ' tell me something about whether the situation can happen again in the future and I am ' + select_predictability_certainty + ' about my choice.</p>';

        question_html += '<br/><hr>';
    }

    console.log(question_html)

    question_html += 'Comments:<br/><textarea name="comments" cols="60" rows="5"></textarea></div>';

    document.getElementById("questions").innerHTML = question_html;

}

function hideQuestions() {

    var var_arrays = jQuery.parseJSON('${var_arrays}');

    for (var i = 0; i < var_arrays.length; i++) {
        var var_array = var_arrays[i];
        var id = var_array['id'];

        var question_eventivity = document.getElementById('question-pred-eventivity' + id);
        console.log(question_eventivity)
        question_eventivity.style.display = 'none';

        // var question_predictability = document.getElementById('question-pred-predictability' + id);
        // question_predictability.style.display = 'none';
    }
}

// read when document is ready (like a "main" function)
$(document).ready(function() {
    console.log("**** run ready function");
    writeQuestions();
    hideQuestions();
});


</script>

    <div class="row col-xs-12 col-md-12"><!-- Instructions -->
    <div class="panel panel-primary"><!--
    <div class="panel-heading"><strong>Task Name</strong></div>
    --><!-- <div class="panel-body"> -->

    <div class="instructions_intro">

    <h1>What is it?</h1>

    <h2>Overview</h2>

    <p class="instructions_intro">
      In this task, you will be presented with a sentence containing <span class="predicate">a word highlighted in yellow</span> followed by questions about that word.
      We call these words predicates. Predicates refer to some kind of situationâ€”for example, a dynamic event (like running or kicking) or a state of being (like happiness). We're interested in three different properties of the situations that different predicates refer to:

      <ol type="i">
        <li>whether the predicate describes a dynamic situation(s)</li>
        <li>whether the predicate describes a particular situation(s)</li>
        <li>whether the predicate describes a pattern or a property of the world</li>
      </ol>

      We give examples that will help you answer these questions below.

    </p>

    <h2>How the task works</h2>
    <h4><a href="javascript:hideshow(document.getElementById('all_examples'))">Click here to hide/show all examples</a></h4>
    <div id="all_examples" style="display: block">
    <p class="instructions_intro">
        The task will begin with a question:

        The first question is about whether the predicate describes a dynamic situation.
        </br>
        <h4><a href="javascript:hideshow(document.getElementById('dyn_examples'))">Examples of dynamic situations (click to hide/show)</a></h4>
        <div id="dyn_examples" style="display: block" class="instructions_examples">
        An example of a predicate describing a dynamic situation can be seen in the following sentence:

        <blockquote>Hannah is <span class="predicate">running</span> a half marathon tomorrow.</blockquote>

        In this sentence, the predicate <span class="predicate">running</span> is dynamic, <bold>it describes a situation that extends over time</bold> - there are particular times where Hannah started to run, then continued running, and stops running.

        Dynamic predicates can appear in various forms. For example the sentence below describes a past dynamic situation :

        <blockquote>Hannah <span class="predicate">won</span> the race.</blockquote>

        In this sentence, the predicate <span class="predicate">won</span> is a dynamic event since it again describes a past situation spread over time.

        Not all predicates are dynamic, for example:

        <blockquote>James is <span class="predicate">sick</span>.</blockquote>

        The predicate sick does not describe a dynamic situation, it expresses a state of being for James. The predicate `sick' doesn't describe a sequence of events, unlike `run'. Similarly for the following example,

        <blockquote>The statue <span class="predicate">stood</span> in the middle of the park.</blockquote>
        </div>

        If you answered no to the first question, there will be no more questions for that predicate. If you answered yes, you will be presented with two questions.

        The second question is about whether the predicate describes a particular situation or situations.

        </br>
        <h4><a href="javascript:hideshow(document.getElementById('part_examples'))">Examples of particular situations (click to hide/show)</a></h4>
        <div id="part_examples" style="display: block" class="instructions_examples">
        An example of a predicate referring to a particular situation can be seen in the following example

        <blockquote>The lions were <span class="predicate">eating</span> a zerba.</blockquote>

        In this sentence, the predicate <span class="predicate">eating</span> refers to a particular situation - the sitatuon of these particular lions eating a zebra.

        Sometimes, the dynamic predicate can describe a particular set of situations.  An example of this can be seen in the following sentence:

        <blockquote>Claire <span class="predicate">eats</span> steak every Sunday.</blockquote>

        In this sentence, the predicate <span class="predicate">eats</span> doesn't refer to a particular situation. It is describing a habit of Claire. In this case, the predicate <span class="predicate">eats</span> refers to the set of situations where Claire has eaten steak(hence her habit)

        However, not all predicates refer to particular situations. Take the following example

        <blockquote>Lions <span class="predicate">hunt</span> their prey in packs</blockquote>
        
        The predicate <span class="predicate">hunt</span> doesn't describe a particular situations, nor does it refer to many situations. In this sentence the predicate <span class="predicate">hunt</span> describes a property of lions in general.
      </div>


        The third question is about whether the predicate describes a predictive situation or not.
      </br>
        <h4><a href="javascript:hideshow(document.getElementById('pred_examples'))">Examples of predictive situations (click to hide/show)</a></h4>
        <div id="pred_examples" style="display: block" class="instructions_examples">

        Sometimes it'll be difficult to tell if the predicate is dynamic, and if so, it refers to a particular situation. For example,

        <blockquote>Rory <span class="predicate">plays</span> the piano.</blockquote>

        The above sentence could be describing a hobby of Rory, as in it is an answer to the question `What does Rory like to do?'. In this case, it `play' is not a dynamic predicate, it describes the state that Rory is a piano player. However in a different context, the word `play' is dynamic, for example if the above sentence is an answer to the question `What does Rory do on Saturday evenings?'. In such a case, the predicate refers to a dynamic situation. There is no right answer to these questions, and you'll need to answer based on what you believe the best choice of answers are. For this reason, we've provided a drop-down menu to input your confidence about your answer for each of the three questions.

    </p>
</div>
</br>

</div> <!-- Panel-body --> </div>
<!-- Panel-primary --><!-- End Instructions --><!-- Content Body -->


<section>
  <input name="dummy", type="hidden" />
  <div id="hit">
    <h2>Sentences</h2>

    <fieldset>
      <div id="questions">


      </div>
    </fieldset>

    <div><input class="btn btn-primary btn-lg" id="submit_button" type="submit" value="Submit" disabled=true /></div>
  </div>
  <!-- hit--></section>
<!-- End Content Body --></div>
</section>
<!-- close container -->
<style type="text/css">fieldset { padding: 10px; background:#fbfbfb; border-radius:5px; margin-bottom:5px; }
</style>
