<!-- Bootstrap v3.0.3 -->
<link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<section class="container" id="Other" style="margin-bottom:15px; padding: 10px 10px; font-family: Arial, Helvetica, Verdana, Geneva, sans-serif; color:#333333; font-size:1.2em;"><!-- style -->
  <style type="text/css">.panel-heading {
    background-color: #FFFFFF !important;
    color:#333333 !important;
    font-size:2.0em;
    border: 0px solid #FFFFFF;
    }

    .panel-primary {
    border-color: #FFFFFF;
    border: 0px solid #FFFFFF;
    }
    .sentence_section {
    margin-bottom: 2em;
    }

    blockquote {
    border-left: 5px solid #666666;
    }

    .instructions_examples {
    border: 1px solid #E0E0E0;
    background-color: #F0F0FF;
    margin-left: 0em;
    padding: 0.5em;
    }

    .predicate {
    background-color: #EBC944;
    padding-left: 3px;
    padding-right: 3px;
    }

    p.example_sentence {
    border: 1px solid #E0E0E0;
    background-color: #F0F0FF;
    margin-left: 0em;
    padding: 0.5em;
    }
  </style>

  <script type="text/javascript">


    // taken from: http://www.javascriptkit.com/javatutors/dom3.shtml
function hideshow(which){

    if (!document.getElementById) {
    return;
    }

    if (which.style.display=="block") {
    which.style.display="none";
    }

    else {
    which.style.display="block";
    }
}

/**
 ** id       the unique ID for this particular select (when the same name
 **          is being used multiple times on the same page)
 **
 ** name     the select.name
 **
 ** options  a list of (option.value, label) pairs
 */
function getSelectHTML(id, name, options) {
    var select_html = '<select name="' + name + id + '" id="' + name + id + '" onchange="toggleVisibility()">';

    for (var i = 0; i < options.length; i++) {
    select_html += '<option value="' + options[i][0] + '">' + options[i][1] + '</option>';
    }

    select_html += '</select>';

    return select_html;
}


function toggleVisibility() {
      // Toggle the submit button availability
      var num_questions = jQuery.parseJSON('${var_arrays}').length;
      var submit = true;

      for (var i = 1; i < 11; i++) {
          id = String(i)
          // console.log(i)
          submit = submit && 
          document.getElementById("pred_dynamicity"+id).value != "na" && 
          document.getElementById("pred_eventivity"+id).value != "na" && 
          document.getElementById("pred_predictability"+id).value != "na" && 
          document.getElementById("dynamicity_certainty"+id).value != "na" && 
          document.getElementById("eventivity_certainty"+id).value != "na" && 
          document.getElementById("predictability_certainty"+id).value != "na"
         }


     if (submit) {
            document.getElementById("submit_button").disabled=false;
                  }  
      else {
            document.getElementById("submit_button").disabled=true;
            } 

}


  /** Add HTML for questions to DOM element with ID 'questions'
   **
   ** Assumes var_arrays is a list of tuples:
   ** id : a numeric id that is used in the generation of the headers when the HIT data comes back
   ** sentence_id : e.g., "en-ud-train.conllu 12"
   ** pred_token : e.g., "6"
   ** predicate_lemma : e.g., "anpredicatece"
   ** sentence
   **
  */

      // Mechanical Turk will fill in '$ { varname }' variables when
      // HTML template is rendered

  function writeQuestions() {
      var var_arrays = jQuery.parseJSON('${var_arrays}');

      var question_html = '';
      question_html += '<div class="sentence_section">';

      for (var i = 0; i < var_arrays.length; i++) {
          var var_array = var_arrays[i];
          var id = var_array['id'];

      // question answers

      var select_dynamicity = getSelectHTML(id,"pred_dynamicity",
                            [['na', '  -------  '],
                             ['true','is'],
                         ['false','is not']]);

      var select_eventivity = getSelectHTML(id,"pred_eventivity",
                         [['na', '  -------  '],
                          ['true','does'],
                          ['false','does not']]);

      var select_predictability = getSelectHTML(id,"pred_predictability",
                         [['na', '  -------  '],
                          ['true','does'],
                          ['false','does not']]);

      var select_dynamicity_certainty = getSelectHTML(
                          id,"dynamicity_certainty",
                            [['na', '  -------  '],
                            ['4', 'totally confident'],
                            ['3', 'very confident'],
                            ['2', 'somewhat confident'],
                            ['1', 'not very confident'],
                            ['0', 'not at all confident']]);

      var select_eventivity_certainty = getSelectHTML(
                          id,"eventivity_certainty",
                            [['na', '  -------  '],
                            ['4', 'totally confident'],
                            ['3', 'very confident'],
                            ['2', 'somewhat confident'],
                            ['1', 'not very confident'],
                            ['0', 'not at all confident']]);

      var select_predictability_certainty = getSelectHTML(
                          id,"predictability_certainty",
                            [['na', '  -------  '],
                            ['4', 'totally confident'],
                            ['3', 'very confident'],
                            ['2', 'somewhat confident'],
                            ['1', 'not very confident'],
                            ['0', 'not at all confident']]);

      // question html

          question_html += '<h3>' + var_array['pred_sentence'] + '</h3>';

      question_html += '<br/><p id="question-pred-dynamicity"' + id + '"> The situation referred to by <span class="predicate">' + var_array['pred_lemma'] + '</span>' + select_dynamicity + 'is dynamic and I am ' + select_certainty + 'about my choice.</p>';

      question_html += '<br/><p id="question-pred-eventivity"' + id + '"> The situation referred to by <span class="predicate">' + var_array['pred_lemma'] + '</span>' + select_eventivity + 'refer to an event or a set of events ' + select_certainty + 'about my choice.</p>';

      question_html += '<br/><p id="question-pred-predictability"' + id + '"> The situation referred to by <span class="predicate">' + var_array['pred_lemma'] + '</span>' + select_predictability + 'tell me something about the likelihood of the situation happening again in the future ' + select_certainty + 'about my choice.</p>';

      question_html += '<br/><hr>';
      }

      question_html += 'Comments:<br/><textarea name="comments" cols="60" rows="5"></textarea></div>';

      document.getElementById("questions").innerHTML = question_html;

  }

function hideQuestions() {

   var var_arrays = jQuery.parseJSON('${var_arrays}');

   for (var i = 0; i < var_arrays.length; i++) {
      var var_array = var_arrays[i];
      var id = var_array['id'];

      var question_pred_dynamicity = document.getElementById('question-pred-dynamicity'+id);
      question_pred_dynamicity.style.visibility = 'hidden';

      var question_pred_eventivity = document.getElementById('question-pred-eventivity'+id);
      question_pred_eventivity.style.visibility = 'hidden';

      var question_pred_predictability = document.getElementById('question-pred-predictability'+id);
      question_pred_predictability.style.visibility = 'hidden';
   }
}

// read when document is ready (like a "main" function)
$(document).ready(function() {
    console.log("**** run ready function");
    writeQuestions();
    // hideQuestions();
});


</script>

    <div class="row col-xs-12 col-md-12"><!-- Instructions -->
    <div class="panel panel-primary"><!--
    <div class="panel-heading"><strong>Task Name</strong></div>
    --><!-- <div class="panel-body"> -->

    <div class="instructions_intro">

    <h1>What is it?</h1>

    <h2>Overview</h2>

    <p class="instructions_intro">
      In this task, you will be presented with a sentence containing <span class="predicate">a word highlighted in yellow</span> followed by questions about that word.
      We call these words predicates. Predicates refer to some kind of situation—for example, a dynamic event (like running or kicking) or a state of being (like happiness or redness). We're interested in three different properties of the situations that different predicates refer to:

      <ol type="i">
        <li>whether the predicate describes a dynamic situation</li>
        <li>whether the predicate describes a particular situation(s)</li>
        <li>whether the predicate describes a general property</li>
      </ol>

      We give examples that will help you answer these questions below.

    </p>

    <h2>How the task works</h2>

    <p class="instructions_intro">
        The task will begin with a question:

        The first question is about whether the predicate describes a dynamic situation.
        </br>
        <h4><a href="javascript:hideshow(document.getElementById('dyn_examples'))">Examples of dynamic situations (click to hide/show)</a></h4>
        <div id="dyn_examples" style="display: block" class="instructions_examples">
        An example of a predicate describing a dynamic situation can be seen in the following sentence:

        <blockquote>Hannah is <span class="predicate">running</span> a half marathon tomorrow.</blockquote>

        In this sentence, the predicate <span class="predicate">running</span> is dynamic - there is a point where Hannah started to run, then continued running, and stops running.

        Dynamic predicates can appear in various forms. For example the sentence below descibes :

        <blockquote>The <span class="predicate">lions</span> roared in unison.</blockquote>

        In this sentence, the predicate <span class="predicate">lions</span> refers to a particular group of things: a group of lions engaging in the act of roaring.

        Not all predicates refer to physical things, but that doesn't mean they don't refer to particular things. An example of a predicate referring to
        a particular non-physical thing can be seen in the following sentence:

        <blockquote>That <span class="predicate">idea</span> is stupid.</blockquote>

        In this sentence, the predicate <span class="predicate">idea</span> refers to a particular non-physical thing.

        </div>

        If you answered no to the first question, there will be no more questions for that predicate. If you answered yes, you will be presented with two questions.

        The second question is about whether the predicate describes a particular situation or partcular situations.

        </br>
        <h4><a href="javascript:hideshow(document.getElementById('part_examples'))">Examples of particular situations (click to hide/show)</a></h4>
        <div id="part_examples" style="display: block" class="instructions_examples">
        An example of a predicate referring to a type of thing can be seen in the following sentence:

        <blockquote><span class="predicate">Lions</span> eat meat.</blockquote>

        In this sentence, the predicate <span class="predicate">lions</span> refers to lions in general – not any particular lion.

        Not all predicates that refer to types of things refer to animal species.  An example of this can be seen in the following sentence:

        <blockquote>Coke <span class="predicate">bottles</span> have long necks.</blockquote>

        In this sentence, the predicate <span class="predicate">bottles</span> refers to Coke bottles in general – not any particular Coke bottle.

        predicates that refer to types of things can come in various forms. For instance, we can also talk about Coke bottles in general using the following sentence:

        <blockquote>The Coke <span class="predicate">bottle</span> has changed shape many times over the years.</blockquote>

        In this case, you should also answer that the predicate <span class="predicate">bottle</span> refers to a type of thing.
      </div>


        The third question is about whether the predicate describes a general predictive property or habit.
      </br>
        <h4><a href="javascript:hideshow(document.getElementById('pred_examples'))">Examples of predictive predicates (click to hide/show)</a></h4>
        <div id="pred_examples" style="display: block" class="instructions_examples">
        An example of a predicate referring to an abstract concept can be seen in the following sentence:

        <blockquote><span class="predicate">Corruption</span> is rampant in Washington.</blockquote>

        In this sentence, the predicate <span class="predicate">corruption</span> doesn't refer to particular thing or group of things, nor does it refer to a type of thing.
        Rather, it refers directly to the abstract concept of corruption.

        Sometimes it will be difficult to tell what a predicate refers to. Consider the following sentence:

        <blockquote>The <span class="predicate">service</span> is bad at that restaurant.</blockquote>

        In this sentence, it seems reasonable to say that the predicate <span class="predicate">service</span> refers to a particular thing – service at that restaurant.
        But it also seems reasonable to say that it refers to a type of thing, which encompasses all the different acts of service carried out at the restaurant.
        It could even be that the predicate <span class="predicate">service</span> refers to an abstract concept of service more generally, since service at a restaurant
        can involve lots of different types of things mashed together – how nice the waiters are, the ambiance of the restaurant, quality of the food, etc. –
        that we wouldn't naturally call one type of thing.

        For this reason, we've provided a drop-down menu to input your confidence about your answer for each of the three questions.

    </p>

</br>

</div> <!-- Panel-body --> </div>
<!-- Panel-primary --><!-- End Instructions --><!-- Content Body -->


<section>
  <input name="dummy", type="hidden" />
  <div id="hit">
    <h2>Sentences</h2>

    <fieldset>
      <div id="questions">


      </div>
    </fieldset>

    <div><input class="btn btn-primary btn-lg" id="submit_button" type="submit" value="Submit" disabled=true /></div>
  </div>
  <!-- hit--></section>
<!-- End Content Body --></div>
</section>
<!-- close container -->
<style type="text/css">fieldset { padding: 10px; background:#fbfbfb; border-radius:5px; margin-bottom:5px; }
</style>
